<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grid Reveal</title>
  <style>
    * {
      margin: 10;
      padding: 10;
      box-sizing: border-box;
    }

    body, html {
      overflow: visible;
      margin: 0;
      padding: 0;
    }

    /* Add typing animation styles */
    .typing-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 10;
      transition: opacity 1s ease-out;
    }

    .typing-text {
      color: white;
      font-family: monospace;
      font-size: 24px;
      white-space: pre-wrap;
      overflow: hidden;
      border-right: 2px solid white;
      width: fit-content;
      margin: 0 auto;
    }

    .fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -2;
    }

    .background-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .grid-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 0px;
      width: 100vw;
      height: 100vh;
      overflow: visible;
      position: relative;
      z-index: 1;
      pointer-events: none; /* Initially disable grid clicking */
    }

    .grid-container.clickable {
      pointer-events: auto;
    }

    .grid-item {
      cursor: url('imgs/cursor.png'), auto;
      position: relative;
      opacity: 0; 
      transition: opacity 0.5s ease-in-out;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-family: monospace;
      color: white;
      border: .5px solid white;
    } 

    .grid-item:not(.visible):hover {
      cursor: url('imgs/cursor.png'), pointer;
    }

    .grid-item.visible {
      opacity: 1;
    }

    .grid-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
      z-index: -1;
    }

    .grid-item p {
      position: relative;
      z-index: 1;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      padding: 10px;
      background-color: rgba(0, 0, 0, 0.3);
      border-radius: 5px;
    }

    @media (max-width: 768px) {
      .grid-container {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</head>
<body>
  <!-- Add typing overlay -->
  <div class="typing-container">
    <div class="typing-text"></div>
  </div>

  <div class="background-container">
    <img src="imgs/background.jpg" alt="Background image">
  </div>

  <div class="grid-container">
    <div class="grid-item item1" data-row="1" data-col="1">
      <img src="imgs/memento.png" alt="Grid image 1">
    </div>
    <div class="grid-item item2" data-row="1" data-col="2">
      <img src="imgs/memento1.png" alt="Grid image 2">
      <p>i remember: the way<br>you'd hold my hand in<br>both of yours.</p>
    </div>
    <div class="grid-item item3" data-row="1" data-col="3">
      <img src="imgs/memento2.png" alt="Grid image 3">
    </div>
    <div class="grid-item item4" data-row="1" data-col="4">
      <img src="imgs/memento3.png" alt="Grid image 4">
    </div>
    <div class="grid-item item5" data-row="2" data-col="1">
      <img src="imgs/memento4.png" alt="Grid image 5">
      <p>the way you'd ask<br>smiling..??</p>
    </div>
    <div class="grid-item item6" data-row="2" data-col="2">
      <img src="imgs/memento5.png" alt="Grid image 6">
    </div>
    <div class="grid-item item7" data-row="2" data-col="3">
      <img src="imgs/memento6.png" alt="Grid image 7">
    </div>
    <div class="grid-item item8" data-row="2" data-col="4">
      <img src="imgs/memento7.png" alt="Grid image 8">
      <p>i remember: the way<br>you'd hold my hand in<br>both of yours.</p>
    </div>
    <div class="grid-item item9" data-row="3" data-col="1">
      <img src="imgs/yaaa.png" alt="Grid image 9">
    </div>
    <div class="grid-item item10" data-row="3" data-col="2">
      <img src="imgs/memento9.png" alt="Grid image 10">
    </div>
    <div class="grid-item item11" data-row="3" data-col="3">
      <img src="imgs/memento8.png" alt="Grid image 11">
      <p>the way you'd ask<br>smiling..??</p>
    </div>
    <div class="grid-item item12" data-row="3" data-col="4">
      <img src="imgs/memento10.png" alt="Grid image 12">
    </div>
  </div>

  <script>
    // Typing animation function
    async function typeText(text, element, speed = 100) {
      for (let i = 0; i < text.length; i++) {
        element.textContent += text[i];
        await new Promise(resolve => setTimeout(resolve, speed));
      }
      return new Promise(resolve => setTimeout(resolve, 1000));
    }

    // Initialize the sequence
    async function initializeSequence() {
      const typingContainer = document.querySelector('.typing-container');
      const typingText = document.querySelector('.typing-text');
      const gridContainer = document.querySelector('.grid-container');
      
      const text = "do you remember...?";
      
      await typeText(text, typingText);
      
      typingContainer.classList.add('fade-out');
      
      setTimeout(() => {
        gridContainer.classList.add('clickable');
        typingContainer.style.display = 'none';
      }, 1000);
    }

    // Start the sequence when page loads
    window.addEventListener('load', initializeSequence);

    document.querySelectorAll('.grid-item').forEach(item => {
      item.addEventListener('click', () => {
        revealAdjacent(item);
      });
    });

    function revealAdjacent(item) {
      const row = parseInt(item.getAttribute('data-row'));
      const col = parseInt(item.getAttribute('data-col'));

      item.classList.add('visible');

      document.querySelectorAll('.grid-item').forEach(adjItem => {
        const adjRow = parseInt(adjItem.getAttribute('data-row'));
        const adjCol = parseInt(adjItem.getAttribute('data-col'));

        if (
          (adjRow === row && (adjCol === col - 1 || adjCol === col + 1)) || 
          (adjCol === col && (adjRow === row - 1 || adjRow === row + 1))
        ) {
          adjItem.classList.add('visible');
        }
      });
    }
  </script>
</body>
</html>